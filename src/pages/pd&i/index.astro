---
import { getCollection } from 'astro:content';
import Footer from '../../components/Footer.astro';
import FormattedDate from '../../components/FormattedDate.astro';
import ProjectStructure from '../../components/ProjectStructure.astro';
import Layout from '../../layouts/Layout.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout>
	<main class="overflow-hidden">
		<section class="">
			<ProjectStructure />
			<ul
				class="flex flex-col gap-8 list-none m-0 p-0 mt-10 w-1/3 ml-auto max-h-[900px] overflow-auto border-l-4 border-l-background"
			>
				{
					posts.map((post) => (
						<li class=" flex flex-col justify-center items-center max-w-[360px] mx-auto ">
							<a href={`/pd&i/${post.id}/`} class="">
								<img
									src={post.data.heroImage}
									alt=""
									class="rounded-md h-full object-cover"
								/>
								<h4 class="title">{post.data.title}</h4>
								<p class="date">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
	<Footer />
</Layout>
